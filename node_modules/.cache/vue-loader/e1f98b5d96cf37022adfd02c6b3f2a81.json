{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_study\\pyac_project\\src\\views\\post\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\views\\post\\Detail.vue","mtime":1619436318406},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { deleteTopic, getTopic } from '@/api/post'\r\nimport { mapGetters } from 'vuex'\r\nimport Author from '@/views/post/Author'\r\nimport Recommend from '@/views/post/Recommend'\r\nimport LvComments from '@/components/Comment/Comments'\r\nimport Vditor from 'vditor'\r\nimport 'vditor/dist/index.css'\r\nexport default {\r\n    name: 'TopicDetail',\r\n    components: { Author, Recommend, LvComments },\r\n    computed: {\r\n    ...mapGetters([\r\n      'token','user'\r\n    ])\r\n  },\r\n  data() {\r\n    return {\r\n      flag: false,\r\n      topic: {\r\n        content: '',\r\n        id: this.$route.params.ids\r\n      },\r\n      tags: [],\r\n      topicUser: {}\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchTopic()\r\n  },\r\n  methods: {\r\n    renderMarkdown(md) {\r\n      Vditor.preview(document.getElementById('preview'), md, {\r\n        hljs: { style: 'github' }\r\n      })\r\n    },\r\n    // 初始化\r\n    async fetchTopic() {\r\n      getTopic(this.$route.params.id).then(response => {\r\n        const { data } = response\r\n        document.title = data.topic.title\r\n        this.topic = data.topic\r\n        this.tags = data.tags\r\n        this.topicUser = data.user\r\n        // this.comments = data.comments\r\n        this.renderMarkdown(this.topic.content)\r\n        this.flag = true\r\n      })\r\n    },\r\n    handleDelete(id) {\r\n      deleteTopic(id).then(value => {\r\n        const { code, message } = value\r\n        alert(message)\r\n        if (code === 200) {\r\n          setTimeout(() => {\r\n            this.$router.push({ path: '/' })\r\n          }, 500)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/post","sourcesContent":["<template>\r\n  <div class=\"columns\">\r\n    <!--文章详情-->\r\n    <div class=\"column is-three-quarters\">\r\n      <!--主题-->\r\n      <el-card\r\n        class=\"box-card\"\r\n        shadow=\"never\"\r\n      >\r\n        <div\r\n          slot=\"header\"\r\n          class=\"has-text-centered\"\r\n        >\r\n          <p class=\"is-size-5 has-text-weight-bold\">{{ topic.title }}</p>\r\n          <div class=\"has-text-grey is-size-7 mt-3\">\r\n            <span>{{ dayjs(topic.createTime).format('YYYY/MM/DD HH:mm:ss') }}</span>\r\n            <el-divider direction=\"vertical\" />\r\n            <span>发布者：{{ topicUser.alias }}</span>\r\n            <el-divider direction=\"vertical\" />\r\n            <span>查看：{{ topic.view }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!--Markdown-->\r\n        <div id=\"preview\" />\r\n\r\n        <!--标签-->\r\n        <nav class=\"level has-text-grey is-size-7 mt-6\">\r\n          <div class=\"level-left\">\r\n            <p class=\"level-item\">\r\n              <b-taglist>\r\n                <router-link\r\n                  v-for=\"(tag, index) in tags\"\r\n                  :key=\"index\"\r\n                  :to=\"{ name: 'tag', params: { name: tag.name } }\"\r\n                >\r\n                  <b-tag type=\"is-info is-light mr-1\">\r\n                    {{ \"#\" + tag.name }}\r\n                  </b-tag>\r\n                </router-link>\r\n              </b-taglist>\r\n            </p>\r\n          </div>\r\n          <div\r\n            v-if=\"token && user.id === topicUser.id\"\r\n            class=\"level-right\"\r\n          >\r\n            <router-link\r\n              class=\"level-item\"\r\n              :to=\"{name:'topic-edit',params: {id:topic.id}}\"\r\n            >\r\n              <span class=\"tag\">编辑</span>\r\n            </router-link>\r\n            <a class=\"level-item\">\r\n              <span\r\n                class=\"tag\"\r\n                @click=\"handleDelete(topic.id)\"\r\n              >删除</span>\r\n            </a>\r\n          </div>\r\n        </nav>\r\n      </el-card>\r\n       <lv-comments :slug=\"topic.id\" />\r\n    </div>\r\n\r\n    <div class=\"column\">\r\n      <!--作者-->\r\n      <Author\r\n        v-if=\"flag\"\r\n        :user=\"topicUser\"\r\n      />\r\n      <!--推荐-->\r\n      <recommend\r\n        v-if=\"flag\"\r\n        :topic-id=\"topic.id\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deleteTopic, getTopic } from '@/api/post'\r\nimport { mapGetters } from 'vuex'\r\nimport Author from '@/views/post/Author'\r\nimport Recommend from '@/views/post/Recommend'\r\nimport LvComments from '@/components/Comment/Comments'\r\nimport Vditor from 'vditor'\r\nimport 'vditor/dist/index.css'\r\nexport default {\r\n    name: 'TopicDetail',\r\n    components: { Author, Recommend, LvComments },\r\n    computed: {\r\n    ...mapGetters([\r\n      'token','user'\r\n    ])\r\n  },\r\n  data() {\r\n    return {\r\n      flag: false,\r\n      topic: {\r\n        content: '',\r\n        id: this.$route.params.ids\r\n      },\r\n      tags: [],\r\n      topicUser: {}\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchTopic()\r\n  },\r\n  methods: {\r\n    renderMarkdown(md) {\r\n      Vditor.preview(document.getElementById('preview'), md, {\r\n        hljs: { style: 'github' }\r\n      })\r\n    },\r\n    // 初始化\r\n    async fetchTopic() {\r\n      getTopic(this.$route.params.id).then(response => {\r\n        const { data } = response\r\n        document.title = data.topic.title\r\n        this.topic = data.topic\r\n        this.tags = data.tags\r\n        this.topicUser = data.user\r\n        // this.comments = data.comments\r\n        this.renderMarkdown(this.topic.content)\r\n        this.flag = true\r\n      })\r\n    },\r\n    handleDelete(id) {\r\n      deleteTopic(id).then(value => {\r\n        const { code, message } = value\r\n        alert(message)\r\n        if (code === 200) {\r\n          setTimeout(() => {\r\n            this.$router.push({ path: '/' })\r\n          }, 500)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#preview {\r\n  min-height: 300px;\r\n}\r\n</style>"]}]}