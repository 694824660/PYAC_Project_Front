{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_study\\pyac_project\\src\\views\\user\\Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\views\\user\\Profile.vue","mtime":1619445048831},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getInfoByName } from '@/api/user'\r\nimport pagination from '@/components/Pagination/index'\r\nimport { mapGetters } from 'vuex'\r\nimport { deleteTopic } from '@/api/post'\r\nexport default {\r\n  name: 'Profile',\r\n  components: { pagination },\r\n  data() {\r\n    return {\r\n      topicUser: {},\r\n      topics: {},\r\n      page: {\r\n        current: 1,\r\n        size: 5,\r\n        total: 0\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['token', 'user'])\r\n  },\r\n  created() {\r\n    this.fetchUserById()\r\n  },\r\n  methods: {\r\n    fetchUserById() {\r\n      getInfoByName(this.$route.params.username, this.page.current, this.page.size).then((res) => {\r\n        const { data } = res\r\n        this.topicUser = data.user\r\n        this.page.current = data.topics.current\r\n        this.page.size = data.topics.size\r\n        this.page.total = data.topics.total\r\n        this.topics = data.topics.records\r\n      })\r\n    },\r\n    handleDelete(id) {\r\n      deleteTopic(id).then(value => {\r\n        const { code, message } = value\r\n        alert(message)\r\n        if (code === 200) {\r\n          setTimeout(() => {\r\n            this.$router.push({ path: '/' })\r\n          }, 500)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div class=\"member\">\r\n    <div class=\"columns\">\r\n      <div class=\"column is-one-quarter\">\r\n        <el-card shadow=\"never\">\r\n          <div slot=\"header\" class=\"has-text-centered\">\r\n            <el-avatar :size=\"64\" :src=\"`https://cn.gravatar.com/avatar/${topicUser.id}?s=164&d=monsterid`\" />\r\n            <p class=\"mt-3\">{{ topicUser.alias || topicUser.username }}</p>\r\n          </div>\r\n          <div>\r\n            <p class=\"content\">积分：<code>{{ topicUser.score }}</code></p>\r\n            <p class=\"content\">入驻：{{ dayjs(topicUser.createTime).format(\"YYYY/MM/DD HH:MM:ss\") }}</p>\r\n            <p class=\"content\">简介：{{ topicUser.bio }}</p>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <div class=\"column\">\r\n        <!--用户发布的话题-->\r\n        <el-card class=\"box-card content\" shadow=\"never\">\r\n          <div slot=\"header\" class=\"has-text-weight-bold\">\r\n            <span>话题</span>\r\n          </div>\r\n\r\n          <div v-if=\"topics.length===0\">\r\n            暂无话题\r\n          </div>\r\n\r\n          <div v-else class=\"topicUser-info\">\r\n            <article v-for=\"(item, index) in topics\" :key=\"index\" class=\"media\">\r\n              <div class=\"media-content\">\r\n                <div class=\"content ellipsis is-ellipsis-1\">\r\n                  <el-tooltip class=\"item\" effect=\"dark\" :content=\"item.title\" placement=\"top\">\r\n                    <router-link :to=\"{ name: 'post-detail', params: { id: item.id } }\">\r\n                      {{ item.title }}\r\n                    </router-link>\r\n                  </el-tooltip>\r\n                </div>\r\n                <nav class=\"level has-text-grey is-size-7\">\r\n                  <div class=\"level-left\">\r\n                    <span class=\"mr-1\">\r\n                      发布于:{{ dayjs(item.createTime).format(\"YYYY/MM/DD HH:mm:ss\") }}\r\n                    </span>\r\n                  </div>\r\n                </nav>\r\n              </div>\r\n              <div v-if=\"token\" class=\"media-right\">\r\n                <div v-if=\"topicUser.username === user.username\" class=\"level\">\r\n                  <div class=\"level-item mr-1\">\r\n                    <router-link :to=\"{name:'topic-edit',params: {id:item.id}}\">\r\n                      <span class=\"tag is-warning\">编辑</span>\r\n                    </router-link>\r\n                  </div>\r\n                  <div class=\"level-item\">\r\n                    <a @click=\"handleDelete(item.id)\">\r\n                      <span class=\"tag is-danger\">删除</span>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <!--分页-->\r\n          <pagination\r\n            v-show=\"page.total > 0\"\r\n            class=\"mt-5\"\r\n            :total=\"page.total\"\r\n            :page.sync=\"page.current\"\r\n            :limit.sync=\"page.size\"\r\n            @pagination=\"fetchUserById\"\r\n          />\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getInfoByName } from '@/api/user'\r\nimport pagination from '@/components/Pagination/index'\r\nimport { mapGetters } from 'vuex'\r\nimport { deleteTopic } from '@/api/post'\r\nexport default {\r\n  name: 'Profile',\r\n  components: { pagination },\r\n  data() {\r\n    return {\r\n      topicUser: {},\r\n      topics: {},\r\n      page: {\r\n        current: 1,\r\n        size: 5,\r\n        total: 0\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['token', 'user'])\r\n  },\r\n  created() {\r\n    this.fetchUserById()\r\n  },\r\n  methods: {\r\n    fetchUserById() {\r\n      getInfoByName(this.$route.params.username, this.page.current, this.page.size).then((res) => {\r\n        const { data } = res\r\n        this.topicUser = data.user\r\n        this.page.current = data.topics.current\r\n        this.page.size = data.topics.size\r\n        this.page.total = data.topics.total\r\n        this.topics = data.topics.records\r\n      })\r\n    },\r\n    handleDelete(id) {\r\n      deleteTopic(id).then(value => {\r\n        const { code, message } = value\r\n        alert(message)\r\n        if (code === 200) {\r\n          setTimeout(() => {\r\n            this.$router.push({ path: '/' })\r\n          }, 500)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}