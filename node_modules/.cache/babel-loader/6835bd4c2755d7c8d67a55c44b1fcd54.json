{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_study\\pyac_project\\src\\views\\user\\Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\views\\user\\Profile.vue","mtime":1619445048831},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:/Vue_study/pyac_project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getInfoByName } from '@/api/user';\nimport pagination from '@/components/Pagination/index';\nimport { mapGetters } from 'vuex';\nimport { deleteTopic } from '@/api/post';\nexport default {\n  name: 'Profile',\n  components: {\n    pagination: pagination\n  },\n  data: function data() {\n    return {\n      topicUser: {},\n      topics: {},\n      page: {\n        current: 1,\n        size: 5,\n        total: 0\n      }\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['token', 'user'])),\n  created: function created() {\n    this.fetchUserById();\n  },\n  methods: {\n    fetchUserById: function fetchUserById() {\n      var _this = this;\n\n      getInfoByName(this.$route.params.username, this.page.current, this.page.size).then(function (res) {\n        var data = res.data;\n        _this.topicUser = data.user;\n        _this.page.current = data.topics.current;\n        _this.page.size = data.topics.size;\n        _this.page.total = data.topics.total;\n        _this.topics = data.topics.records;\n      });\n    },\n    handleDelete: function handleDelete(id) {\n      var _this2 = this;\n\n      deleteTopic(id).then(function (value) {\n        var code = value.code,\n            message = value.message;\n        alert(message);\n\n        if (code === 200) {\n          setTimeout(function () {\n            _this2.$router.push({\n              path: '/'\n            });\n          }, 500);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA,SAAA,aAAA,QAAA,YAAA;AACA,OAAA,UAAA,MAAA,+BAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,WAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,UAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA,CAFA;AAGA,QAAA,KAAA,EAAA;AAHA;AAHA,KAAA;AASA,GAbA;AAcA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,OAAA,EAAA,MAAA,CAAA,CADA,CAdA;AAiBA,EAAA,OAjBA,qBAiBA;AACA,SAAA,aAAA;AACA,GAnBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,MAAA,aAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,IAAA,CAAA,OAAA,EAAA,KAAA,IAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,MAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,MAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,IAAA,CAAA,MAAA,CAAA,OAAA;AACA,OAPA;AAQA,KAVA;AAWA,IAAA,YAXA,wBAWA,EAXA,EAWA;AAAA;;AACA,MAAA,WAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AAAA,YAAA,OAAA,GAAA,KAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;;AACA,YAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA,WAFA,EAEA,GAFA,CAAA;AAGA;AACA,OARA;AASA;AArBA;AApBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"member\">\r\n    <div class=\"columns\">\r\n      <div class=\"column is-one-quarter\">\r\n        <el-card shadow=\"never\">\r\n          <div slot=\"header\" class=\"has-text-centered\">\r\n            <el-avatar :size=\"64\" :src=\"`https://cn.gravatar.com/avatar/${topicUser.id}?s=164&d=monsterid`\" />\r\n            <p class=\"mt-3\">{{ topicUser.alias || topicUser.username }}</p>\r\n          </div>\r\n          <div>\r\n            <p class=\"content\">积分：<code>{{ topicUser.score }}</code></p>\r\n            <p class=\"content\">入驻：{{ dayjs(topicUser.createTime).format(\"YYYY/MM/DD HH:MM:ss\") }}</p>\r\n            <p class=\"content\">简介：{{ topicUser.bio }}</p>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <div class=\"column\">\r\n        <!--用户发布的话题-->\r\n        <el-card class=\"box-card content\" shadow=\"never\">\r\n          <div slot=\"header\" class=\"has-text-weight-bold\">\r\n            <span>话题</span>\r\n          </div>\r\n\r\n          <div v-if=\"topics.length===0\">\r\n            暂无话题\r\n          </div>\r\n\r\n          <div v-else class=\"topicUser-info\">\r\n            <article v-for=\"(item, index) in topics\" :key=\"index\" class=\"media\">\r\n              <div class=\"media-content\">\r\n                <div class=\"content ellipsis is-ellipsis-1\">\r\n                  <el-tooltip class=\"item\" effect=\"dark\" :content=\"item.title\" placement=\"top\">\r\n                    <router-link :to=\"{ name: 'post-detail', params: { id: item.id } }\">\r\n                      {{ item.title }}\r\n                    </router-link>\r\n                  </el-tooltip>\r\n                </div>\r\n                <nav class=\"level has-text-grey is-size-7\">\r\n                  <div class=\"level-left\">\r\n                    <span class=\"mr-1\">\r\n                      发布于:{{ dayjs(item.createTime).format(\"YYYY/MM/DD HH:mm:ss\") }}\r\n                    </span>\r\n                  </div>\r\n                </nav>\r\n              </div>\r\n              <div v-if=\"token\" class=\"media-right\">\r\n                <div v-if=\"topicUser.username === user.username\" class=\"level\">\r\n                  <div class=\"level-item mr-1\">\r\n                    <router-link :to=\"{name:'topic-edit',params: {id:item.id}}\">\r\n                      <span class=\"tag is-warning\">编辑</span>\r\n                    </router-link>\r\n                  </div>\r\n                  <div class=\"level-item\">\r\n                    <a @click=\"handleDelete(item.id)\">\r\n                      <span class=\"tag is-danger\">删除</span>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <!--分页-->\r\n          <pagination\r\n            v-show=\"page.total > 0\"\r\n            class=\"mt-5\"\r\n            :total=\"page.total\"\r\n            :page.sync=\"page.current\"\r\n            :limit.sync=\"page.size\"\r\n            @pagination=\"fetchUserById\"\r\n          />\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getInfoByName } from '@/api/user'\r\nimport pagination from '@/components/Pagination/index'\r\nimport { mapGetters } from 'vuex'\r\nimport { deleteTopic } from '@/api/post'\r\nexport default {\r\n  name: 'Profile',\r\n  components: { pagination },\r\n  data() {\r\n    return {\r\n      topicUser: {},\r\n      topics: {},\r\n      page: {\r\n        current: 1,\r\n        size: 5,\r\n        total: 0\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['token', 'user'])\r\n  },\r\n  created() {\r\n    this.fetchUserById()\r\n  },\r\n  methods: {\r\n    fetchUserById() {\r\n      getInfoByName(this.$route.params.username, this.page.current, this.page.size).then((res) => {\r\n        const { data } = res\r\n        this.topicUser = data.user\r\n        this.page.current = data.topics.current\r\n        this.page.size = data.topics.size\r\n        this.page.total = data.topics.total\r\n        this.topics = data.topics.records\r\n      })\r\n    },\r\n    handleDelete(id) {\r\n      deleteTopic(id).then(value => {\r\n        const { code, message } = value\r\n        alert(message)\r\n        if (code === 200) {\r\n          setTimeout(() => {\r\n            this.$router.push({ path: '/' })\r\n          }, 500)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/views/user"}]}