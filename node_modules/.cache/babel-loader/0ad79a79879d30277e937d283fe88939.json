{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_study\\pyac_project\\src\\views\\post\\Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\views\\post\\Create.vue","mtime":1619575498417},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { post } from \"@/api/post\";\nimport Vditor from \"vditor\";\nimport \"vditor/dist/index.css\";\nexport default {\n  name: \"TopicPost\",\n  data: function data() {\n    return {\n      contentEditor: {},\n      ruleForm: {\n        title: \"\",\n        // 标题\n        tags: [],\n        // 标签\n        content: \"\" // 内容\n\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: \"请输入话题名称\",\n          trigger: \"blur\"\n        }, {\n          min: 1,\n          max: 25,\n          message: \"长度在 1 到 25 个字符\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.contentEditor = new Vditor(\"vditor\", {\n      height: 500,\n      placeholder: \"此处为话题内容……\",\n      theme: \"classic\",\n      counter: {\n        enable: true,\n        type: \"markdown\"\n      },\n      preview: {\n        delay: 0,\n        hljs: {\n          style: \"monokai\",\n          lineNumber: true\n        }\n      },\n      tab: \"\\t\",\n      typewriterMode: true,\n      toolbarConfig: {\n        pin: true\n      },\n      cache: {\n        enable: false\n      },\n      mode: \"sv\"\n    });\n  },\n  methods: {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this.contentEditor.getValue().length === 1 || _this.contentEditor.getValue() == null || _this.contentEditor.getValue() === \"\") {\n            alert(\"话题内容不可为空\");\n            return false;\n          }\n\n          if (_this.ruleForm.tags == null || _this.ruleForm.tags.length === 0) {\n            alert(\"标签不可以为空\");\n            return false;\n          }\n\n          _this.ruleForm.content = _this.contentEditor.getValue();\n          post(_this.ruleForm).then(function (response) {\n            var data = response.data;\n            setTimeout(function () {\n              _this.$router.push({\n                name: \"post-detail\",\n                params: {\n                  id: data.id\n                }\n              });\n            }, 800);\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n      this.contentEditor.setValue(\"\");\n      this.ruleForm.tags = \"\";\n    }\n  }\n};",{"version":3,"sources":["Create.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"columns\" style=\"padding-top: 80px\">\r\n    <div class=\"column is-full\">\r\n      <el-card class=\"box-card\" shadow=\"never\">\r\n        <div slot=\"header\" class=\"clearfix\">\r\n          <span><i class=\"fa fa fa-book\"> 主题 / 发布主题</i></span>\r\n        </div>\r\n        <div>\r\n          <el-form\r\n            ref=\"ruleForm\"\r\n            :model=\"ruleForm\"\r\n            :rules=\"rules\"\r\n            class=\"demo-ruleForm\">\r\n            <el-form-item prop=\"title\">\r\n              <el-input v-model=\"ruleForm.title\" placeholder=\"输入主题名称\" />\r\n            </el-form-item>\r\n            \r\n            <!--Markdown-->\r\n            <div id=\"vditor\" />\r\n\r\n            <b-taginput\r\n              v-model=\"ruleForm.tags\"\r\n              class=\"my-3\"\r\n              maxlength=\"15\"\r\n              maxtags=\"3\"\r\n              ellipsis\r\n              placeholder=\"请输入主题标签，限制为 15 个字符和 3 个标签\"\r\n            />\r\n\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\r\n                >立即创建\r\n              </el-button>\r\n              <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { post } from \"@/api/post\";\r\nimport Vditor from \"vditor\";\r\nimport \"vditor/dist/index.css\";\r\nexport default {\r\n  name: \"TopicPost\",\r\n  data() {\r\n    return {\r\n      contentEditor: {},\r\n      ruleForm: {\r\n        title: \"\", // 标题\r\n        tags: [], // 标签\r\n        content: \"\", // 内容\r\n      },\r\n      rules: {\r\n        title: [\r\n          { required: true, message: \"请输入话题名称\", trigger: \"blur\" },\r\n          {\r\n            min: 1,\r\n            max: 25,\r\n            message: \"长度在 1 到 25 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.contentEditor = new Vditor(\"vditor\", {\r\n      height: 500,\r\n      placeholder: \"此处为话题内容……\",\r\n      theme: \"classic\",\r\n      counter: {\r\n        enable: true,\r\n        type: \"markdown\",\r\n      },\r\n      preview: {\r\n        delay: 0,\r\n        hljs: {\r\n          style: \"monokai\",\r\n          lineNumber: true,\r\n        },\r\n      },\r\n      tab: \"\\t\",\r\n      typewriterMode: true,\r\n      toolbarConfig: {\r\n        pin: true,\r\n      },\r\n      cache: {\r\n        enable: false,\r\n      },\r\n      mode: \"sv\",\r\n    });\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (\r\n            this.contentEditor.getValue().length === 1 ||\r\n            this.contentEditor.getValue() == null ||\r\n            this.contentEditor.getValue() === \"\"\r\n          ) {\r\n            alert(\"话题内容不可为空\");\r\n            return false;\r\n          }\r\n          if (this.ruleForm.tags == null || this.ruleForm.tags.length === 0) {\r\n            alert(\"标签不可以为空\");\r\n            return false;\r\n          }\r\n          this.ruleForm.content = this.contentEditor.getValue();\r\n          post(this.ruleForm).then((response) => {\r\n            const { data } = response;\r\n            setTimeout(() => {\r\n              this.$router.push({\r\n                name: \"post-detail\",\r\n                params: { id: data.id },\r\n              });\r\n            }, 800);\r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n      this.contentEditor.setValue(\"\");\r\n      this.ruleForm.tags = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/views/post"}]}