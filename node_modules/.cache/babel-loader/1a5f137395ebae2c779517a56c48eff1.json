{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_study\\pyac_project\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\store\\modules\\user.js","mtime":1619422108371},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport { getUserInfo, login as _login, logout as _logout } from \"@/api/auth/auth\";\nimport { getToken, setToken, removeToken } from \"@/utils/auth\";\nvar state = {\n  token: getToken(),\n  // token\n  user: \"\" // 用户对象\n\n};\nvar mutations = {\n  SET_TOKEN_STATE: function SET_TOKEN_STATE(state, token) {\n    state.token = token;\n  },\n  SET_USER_STATE: function SET_USER_STATE(state, user) {\n    state.user = user;\n  }\n};\nvar actions = {\n  // 用户登录\n  login: function login(_ref, userInfo) {\n    var commit = _ref.commit;\n    console.log(userInfo);\n    var name = userInfo.name,\n        pass = userInfo.pass,\n        rememberMe = userInfo.rememberMe;\n    return new Promise(function (resolve, reject) {\n      _login({\n        username: name.trim(),\n        password: pass,\n        rememberMe: rememberMe\n      }).then(function (response) {\n        var data = response.data;\n        commit('SET_TOKEN_STATE', data.token);\n        setToken(data.token);\n        resolve();\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  // 获取用户信息\n  getInfo: function getInfo(_ref2) {\n    var commit = _ref2.commit,\n        state = _ref2.state;\n    return new Promise(function (resolve, reject) {\n      getUserInfo().then(function (response) {\n        var data = response.data;\n\n        if (!data) {\n          commit('SET_TOKEN_STATE', \"\");\n          commit('SET_USER_STATE', \"\");\n          removeToken();\n          resolve();\n          reject('Verification failed, please Login again.');\n        }\n\n        commit('SET_USER_STATE', data);\n        resolve(data);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  //退出登录\n  logout: function logout(_ref3) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    return new Promise(function (resolve, reject) {\n      _logout(state.token).then(function (response) {\n        console.log(response);\n        commit(\"SET_TOKEN_STATE\", \"\");\n        commit(\"SET_USER_STATE\", \"\");\n        removeToken();\n        resolve();\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["D:/Vue_study/pyac_project/src/store/modules/user.js"],"names":["getUserInfo","login","logout","getToken","setToken","removeToken","state","token","user","mutations","SET_TOKEN_STATE","SET_USER_STATE","actions","userInfo","commit","console","log","name","pass","rememberMe","Promise","resolve","reject","username","trim","password","then","response","data","catch","error","getInfo","namespaced"],"mappings":"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","sourcesContent":["import { getUserInfo, login, logout } from \"@/api/auth/auth\";\r\nimport { getToken, setToken, removeToken } from \"@/utils/auth\";\r\n\r\nconst state = {\r\n  token: getToken(), // token\r\n  user: \"\", // 用户对象\r\n}\r\n\r\nconst mutations = {\r\n    SET_TOKEN_STATE: (state, token) => {\r\n        state.token = token\r\n    },\r\n    SET_USER_STATE: (state, user) => {\r\n        state.user = user\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    // 用户登录\r\n    login({ commit }, userInfo) {\r\n        console.log(userInfo)\r\n        const { name, pass, rememberMe } = userInfo\r\n        return new Promise((resolve, reject) => {\r\n            login({ username: name.trim(), password: pass, rememberMe: rememberMe }).then(response => {\r\n            const { data } = response\r\n            commit('SET_TOKEN_STATE', data.token)\r\n            setToken(data.token)\r\n            resolve()\r\n            }).catch(error => {\r\n            reject(error)\r\n            })\r\n        })\r\n    },\r\n    // 获取用户信息\r\n    getInfo({ commit, state }) {\r\n        return new Promise((resolve, reject) => {\r\n            getUserInfo().then(response => {\r\n            const { data } = response\r\n            if (!data) {\r\n                commit('SET_TOKEN_STATE', \"\")\r\n                commit('SET_USER_STATE', \"\")\r\n                removeToken()\r\n                resolve()\r\n                reject('Verification failed, please Login again.')\r\n            }\r\n            commit('SET_USER_STATE', data)\r\n            resolve(data)\r\n            }).catch(error => {\r\n            reject(error)\r\n            })\r\n        })\r\n    },\r\n    //退出登录\r\n    logout({ commit, state }) {\r\n        return new Promise((resolve, reject) => {\r\n          logout(state.token)\r\n            .then((response) => {\r\n              console.log(response);\r\n              commit(\"SET_TOKEN_STATE\", \"\");\r\n              commit(\"SET_USER_STATE\", \"\");\r\n              removeToken();\r\n              resolve();\r\n            })\r\n            .catch((error) => {\r\n              reject(error);\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"]}]}