{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_study\\pyac_project\\src\\views\\post\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\views\\post\\Detail.vue","mtime":1619436318406},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:/Vue_study/pyac_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/Vue_study/pyac_project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { deleteTopic, getTopic } from '@/api/post';\nimport { mapGetters } from 'vuex';\nimport Author from '@/views/post/Author';\nimport Recommend from '@/views/post/Recommend';\nimport LvComments from '@/components/Comment/Comments';\nimport Vditor from 'vditor';\nimport 'vditor/dist/index.css';\nexport default {\n  name: 'TopicDetail',\n  components: {\n    Author: Author,\n    Recommend: Recommend,\n    LvComments: LvComments\n  },\n  computed: _objectSpread({}, mapGetters(['token', 'user'])),\n  data: function data() {\n    return {\n      flag: false,\n      topic: {\n        content: '',\n        id: this.$route.params.ids\n      },\n      tags: [],\n      topicUser: {}\n    };\n  },\n  mounted: function mounted() {\n    this.fetchTopic();\n  },\n  methods: {\n    renderMarkdown: function renderMarkdown(md) {\n      Vditor.preview(document.getElementById('preview'), md, {\n        hljs: {\n          style: 'github'\n        }\n      });\n    },\n    // 初始化\n    fetchTopic: function () {\n      var _fetchTopic = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                getTopic(this.$route.params.id).then(function (response) {\n                  var data = response.data;\n                  document.title = data.topic.title;\n                  _this.topic = data.topic;\n                  _this.tags = data.tags;\n                  _this.topicUser = data.user; // this.comments = data.comments\n\n                  _this.renderMarkdown(_this.topic.content);\n\n                  _this.flag = true;\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchTopic() {\n        return _fetchTopic.apply(this, arguments);\n      }\n\n      return fetchTopic;\n    }(),\n    handleDelete: function handleDelete(id) {\n      var _this2 = this;\n\n      deleteTopic(id).then(function (value) {\n        var code = value.code,\n            message = value.message;\n        alert(message);\n\n        if (code === 200) {\n          setTimeout(function () {\n            _this2.$router.push({\n              path: '/'\n            });\n          }, 500);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA,SAAA,WAAA,EAAA,QAAA,QAAA,YAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,MAAA,MAAA,qBAAA;AACA,OAAA,SAAA,MAAA,wBAAA;AACA,OAAA,UAAA,MAAA,+BAAA;AACA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,MAAA,EAAA,MAAA;AAAA,IAAA,SAAA,EAAA,SAAA;AAAA,IAAA,UAAA,EAAA;AAAA,GAFA;AAGA,EAAA,QAAA,oBACA,UAAA,CAAA,CACA,OADA,EACA,MADA,CAAA,CADA,CAHA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,EAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAFA,OAFA;AAMA,MAAA,IAAA,EAAA,EANA;AAOA,MAAA,SAAA,EAAA;AAPA,KAAA;AASA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,SAAA,UAAA;AACA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,EADA,EACA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA,EAAA,EAAA;AACA,QAAA,IAAA,EAAA;AAAA,UAAA,KAAA,EAAA;AAAA;AADA,OAAA;AAGA,KALA;AAMA;AACA,IAAA,UAPA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAQA,gBAAA,QAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,sBAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,kBAAA,QAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA;AACA,kBAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA,kBAAA,KAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA;AACA,kBAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CALA,CAMA;;AACA,kBAAA,KAAA,CAAA,cAAA,CAAA,KAAA,CAAA,KAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AACA,iBATA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAmBA,IAAA,YAnBA,wBAmBA,EAnBA,EAmBA;AAAA;;AACA,MAAA,WAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AAAA,YAAA,OAAA,GAAA,KAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;;AACA,YAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA,WAFA,EAEA,GAFA,CAAA;AAGA;AACA,OARA;AASA;AA7BA;AAtBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"columns\">\r\n    <!--文章详情-->\r\n    <div class=\"column is-three-quarters\">\r\n      <!--主题-->\r\n      <el-card\r\n        class=\"box-card\"\r\n        shadow=\"never\"\r\n      >\r\n        <div\r\n          slot=\"header\"\r\n          class=\"has-text-centered\"\r\n        >\r\n          <p class=\"is-size-5 has-text-weight-bold\">{{ topic.title }}</p>\r\n          <div class=\"has-text-grey is-size-7 mt-3\">\r\n            <span>{{ dayjs(topic.createTime).format('YYYY/MM/DD HH:mm:ss') }}</span>\r\n            <el-divider direction=\"vertical\" />\r\n            <span>发布者：{{ topicUser.alias }}</span>\r\n            <el-divider direction=\"vertical\" />\r\n            <span>查看：{{ topic.view }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!--Markdown-->\r\n        <div id=\"preview\" />\r\n\r\n        <!--标签-->\r\n        <nav class=\"level has-text-grey is-size-7 mt-6\">\r\n          <div class=\"level-left\">\r\n            <p class=\"level-item\">\r\n              <b-taglist>\r\n                <router-link\r\n                  v-for=\"(tag, index) in tags\"\r\n                  :key=\"index\"\r\n                  :to=\"{ name: 'tag', params: { name: tag.name } }\"\r\n                >\r\n                  <b-tag type=\"is-info is-light mr-1\">\r\n                    {{ \"#\" + tag.name }}\r\n                  </b-tag>\r\n                </router-link>\r\n              </b-taglist>\r\n            </p>\r\n          </div>\r\n          <div\r\n            v-if=\"token && user.id === topicUser.id\"\r\n            class=\"level-right\"\r\n          >\r\n            <router-link\r\n              class=\"level-item\"\r\n              :to=\"{name:'topic-edit',params: {id:topic.id}}\"\r\n            >\r\n              <span class=\"tag\">编辑</span>\r\n            </router-link>\r\n            <a class=\"level-item\">\r\n              <span\r\n                class=\"tag\"\r\n                @click=\"handleDelete(topic.id)\"\r\n              >删除</span>\r\n            </a>\r\n          </div>\r\n        </nav>\r\n      </el-card>\r\n       <lv-comments :slug=\"topic.id\" />\r\n    </div>\r\n\r\n    <div class=\"column\">\r\n      <!--作者-->\r\n      <Author\r\n        v-if=\"flag\"\r\n        :user=\"topicUser\"\r\n      />\r\n      <!--推荐-->\r\n      <recommend\r\n        v-if=\"flag\"\r\n        :topic-id=\"topic.id\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deleteTopic, getTopic } from '@/api/post'\r\nimport { mapGetters } from 'vuex'\r\nimport Author from '@/views/post/Author'\r\nimport Recommend from '@/views/post/Recommend'\r\nimport LvComments from '@/components/Comment/Comments'\r\nimport Vditor from 'vditor'\r\nimport 'vditor/dist/index.css'\r\nexport default {\r\n    name: 'TopicDetail',\r\n    components: { Author, Recommend, LvComments },\r\n    computed: {\r\n    ...mapGetters([\r\n      'token','user'\r\n    ])\r\n  },\r\n  data() {\r\n    return {\r\n      flag: false,\r\n      topic: {\r\n        content: '',\r\n        id: this.$route.params.ids\r\n      },\r\n      tags: [],\r\n      topicUser: {}\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchTopic()\r\n  },\r\n  methods: {\r\n    renderMarkdown(md) {\r\n      Vditor.preview(document.getElementById('preview'), md, {\r\n        hljs: { style: 'github' }\r\n      })\r\n    },\r\n    // 初始化\r\n    async fetchTopic() {\r\n      getTopic(this.$route.params.id).then(response => {\r\n        const { data } = response\r\n        document.title = data.topic.title\r\n        this.topic = data.topic\r\n        this.tags = data.tags\r\n        this.topicUser = data.user\r\n        // this.comments = data.comments\r\n        this.renderMarkdown(this.topic.content)\r\n        this.flag = true\r\n      })\r\n    },\r\n    handleDelete(id) {\r\n      deleteTopic(id).then(value => {\r\n        const { code, message } = value\r\n        alert(message)\r\n        if (code === 200) {\r\n          setTimeout(() => {\r\n            this.$router.push({ path: '/' })\r\n          }, 500)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#preview {\r\n  min-height: 300px;\r\n}\r\n</style>"],"sourceRoot":"src/views/post"}]}