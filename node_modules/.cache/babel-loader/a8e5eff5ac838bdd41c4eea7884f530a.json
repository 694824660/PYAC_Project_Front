{"remainingRequest":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue_study\\pyac_project\\src\\views\\post\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue_study\\pyac_project\\src\\views\\post\\Edit.vue","mtime":1619576980302},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue_study\\pyac_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getTopic, update } from \"@/api/post\";\nimport Vditor from \"vditor\";\nimport \"vditor/dist/index.css\";\nexport default {\n  name: \"TopicEdit\",\n  components: {},\n  data: function data() {\n    return {\n      topic: {},\n      tags: []\n    };\n  },\n  created: function created() {\n    this.fetchTopic();\n  },\n  methods: {\n    renderMarkdown: function renderMarkdown(md) {\n      var _this = this;\n\n      this.contentEditor = new Vditor(\"vditor\", {\n        height: 460,\n        placeholder: \"输入要更新的内容\",\n        preview: {\n          hljs: {\n            style: \"monokai\"\n          }\n        },\n        mode: \"sv\",\n        after: function after() {\n          _this.contentEditor.setValue(md);\n        }\n      });\n    },\n    fetchTopic: function fetchTopic() {\n      var _this2 = this;\n\n      getTopic(this.$route.params.id).then(function (value) {\n        _this2.topic = value.data.topic;\n        _this2.tags = value.data.tags.map(function (tag) {\n          return tag.name;\n        });\n\n        _this2.renderMarkdown(_this2.topic.content);\n      });\n    },\n    handleUpdate: function handleUpdate() {\n      var _this3 = this;\n\n      this.topic.content = this.contentEditor.getValue();\n      update(this.topic).then(function (response) {\n        var data = response.data;\n        console.log(data);\n        setTimeout(function () {\n          _this3.$router.push({\n            name: \"post-detail\",\n            params: {\n              id: data.id\n            }\n          });\n        }, 800);\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n      this.contentEditor.setValue(\"\");\n      this.tags = \"\";\n    }\n  }\n};",{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAA,QAAA,EAAA,MAAA,QAAA,YAAA;AACA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,UAAA;AACA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,EADA,EACA;AAAA;;AACA,WAAA,aAAA,GAAA,IAAA,MAAA,CAAA,QAAA,EAAA;AACA,QAAA,MAAA,EAAA,GADA;AAEA,QAAA,WAAA,EAAA,UAFA;AAGA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA;AAAA,YAAA,KAAA,EAAA;AAAA;AADA,SAHA;AAMA,QAAA,IAAA,EAAA,IANA;AAOA,QAAA,KAAA,EAAA,iBAAA;AACA,UAAA,KAAA,CAAA,aAAA,CAAA,QAAA,CAAA,EAAA;AACA;AATA,OAAA,CAAA;AAWA,KAbA;AAcA,IAAA,UAdA,wBAcA;AAAA;;AACA,MAAA,QAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,KAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA,UAAA,GAAA;AAAA,iBAAA,GAAA,CAAA,IAAA;AAAA,SAAA,CAAA;;AACA,QAAA,MAAA,CAAA,cAAA,CAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AACA,OAJA;AAKA,KApBA;AAqBA,IAAA,YAAA,EAAA,wBAAA;AAAA;;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,KAAA,aAAA,CAAA,QAAA,EAAA;AACA,MAAA,MAAA,CAAA,KAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,QAAA,UAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,aADA;AAEA,YAAA,MAAA,EAAA;AAAA,cAAA,EAAA,EAAA,IAAA,CAAA;AAAA;AAFA,WAAA;AAIA,SALA,EAKA,GALA,CAAA;AAMA,OATA;AAUA,KAjCA;AAkCA,IAAA,SAlCA,qBAkCA,QAlCA,EAkCA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,WAAA;AACA,WAAA,aAAA,CAAA,QAAA,CAAA,EAAA;AACA,WAAA,IAAA,GAAA,EAAA;AACA;AAtCA;AAZA,CAAA","sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"columns\">\r\n      <div class=\"column is-full\">\r\n        <el-card class=\"box-card\" shadow=\"never\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span><i class=\"fa fa fa-book\"> 撰写游记博文</i></span>\r\n          </div>\r\n          <div>\r\n            <el-form :model=\"topic\" ref=\"topic\" class=\"demo-topic\">\r\n              <el-form-item prop=\"title\">\r\n                <el-input\r\n                  v-model=\"topic.title\"\r\n                  placeholder=\"输入新的主题名称\"\r\n                ></el-input>\r\n              </el-form-item>\r\n\r\n              <!--Markdown-->\r\n              <div id=\"vditor\"></div>\r\n\r\n              <b-taginput\r\n                v-model=\"tags\"\r\n                class=\"my-3\"\r\n                maxlength=\"15\"\r\n                maxtags=\"3\"\r\n                ellipsis\r\n                placeholder=\"请输入主题标签，限制为 15 个字符和 3 个标签\"\r\n              />\r\n              <el-form-item class=\"mt-3\">\r\n                <el-button type=\"primary\" @click=\"handleUpdate()\"\r\n                  >更新\r\n                </el-button>\r\n                <el-button @click=\"resetForm('topic')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { getTopic, update } from \"@/api/post\";\r\nimport Vditor from \"vditor\";\r\nimport \"vditor/dist/index.css\";\r\nexport default {\r\n  name: \"TopicEdit\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      topic: {},\r\n      tags: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchTopic();\r\n  },\r\n  methods: {\r\n    renderMarkdown(md) {\r\n      this.contentEditor = new Vditor(\"vditor\", {\r\n        height: 460,\r\n        placeholder: \"输入要更新的内容\",\r\n        preview: {\r\n          hljs: { style: \"monokai\" },\r\n        },\r\n        mode: \"sv\",\r\n        after: () => {\r\n          this.contentEditor.setValue(md);\r\n        },\r\n      });\r\n    },\r\n    fetchTopic() {\r\n      getTopic(this.$route.params.id).then((value) => {\r\n        this.topic = value.data.topic;\r\n        this.tags = value.data.tags.map(tag => tag.name);\r\n        this.renderMarkdown(this.topic.content);\r\n      });\r\n    },\r\n    handleUpdate: function () {\r\n      this.topic.content = this.contentEditor.getValue();\r\n      update(this.topic).then((response) => {\r\n        const { data } = response;\r\n        console.log(data);\r\n        setTimeout(() => {\r\n          this.$router.push({\r\n            name: \"post-detail\",\r\n            params: { id: data.id },\r\n          });\r\n        }, 800);\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n      this.contentEditor.setValue(\"\");\r\n      this.tags = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.vditor-reset pre > code {\r\n  font-size: 100%;\r\n}\r\n</style>"],"sourceRoot":"src/views/post"}]}